<!DOCTYPE html>
<html>
<body onload="myFunction()">

<input type="file" id="myFile" multiple size="50" onchange="myFunction()">
<button>Analyser</button>

<p id="demo"></p>
<p id="resultat">Rien pour le moment</p>
  
<script>
    function myFunction(){
        var x = document.getElementById("myFile");
        var txt = "";
        txt  += "<br>The path of the selected file: " + x.value;
        document.getElementById("demo").innerHTML = txt;

        document.querySelector('button').onclick = () => {

            const request =  new XMLHttpRequest();
            const path = 'C:\\Users\\Mouhamadou Gaye\\Documents\\Projet Python\\StageSonatel\\Machine-Learning-approach-for-Malware-Detection\\WhatsApp.exe';
            request.open('POST','/analyse');

            request.onload = () => {

                const data = JSON.parse(request.responseText);

                if(data.success){
                const content  = `Ceci est un  ${data.verdict}`
                document.querySelector('#resultat').innerHTML = content
                }
                else{
                    document.querySelector('#resultat').innerHTML='An error ocurred !!';
                }
            }
            const data = new FormData();
            data.append('path',path);
            request.send(data);
            return false;
        }
    }
</script>
</body>
</html>
